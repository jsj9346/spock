#!/bin/bash
# Quick Backfill Status Check Commands
# Usage: source scripts/check_backfill_status.sh

echo "================================================================================"
echo "BACKFILL QUICK STATUS COMMANDS"
echo "================================================================================"
echo ""
echo "1ï¸âƒ£  ì „ì²´ ìƒí™© í™•ì¸ (ì¶”ì²œ):"
echo "   ./scripts/monitor_backfills.sh"
echo ""
echo "2ï¸âƒ£  ì‹¤ì‹œê°„ ìë™ ê°±ì‹  (10ì´ˆë§ˆë‹¤):"
echo "   watch -n 10 ./scripts/monitor_backfills.sh"
echo ""
echo "3ï¸âƒ£  DART ë°±í•„ ì§„í–‰ë¥ :"
echo "   tail -5 logs/dart_production_backfill_RESTART.log | grep -E '\[.*\]'"
echo ""
echo "4ï¸âƒ£  pykrx ë°±í•„ ì§„í–‰ë¥ :"
echo "   tail -5 logs/pykrx_production_backfill_RESTART.log | grep -E '(Progress|Success Rate)'"
echo ""
echo "5ï¸âƒ£  ë°ì´í„°ë² ì´ìŠ¤ ë ˆì½”ë“œ ìˆ˜:"
echo "   psql -d quant_platform -c \"SELECT data_source, COUNT(*) FROM ticker_fundamentals WHERE region = 'KR' GROUP BY data_source;\""
echo ""
echo "6ï¸âƒ£  í”„ë¡œì„¸ìŠ¤ ìƒíƒœ í™•ì¸:"
echo "   ps aux | grep 'backfill_fundamentals' | grep -v grep"
echo ""
echo "7ï¸âƒ£  DART ë¡œê·¸ ì‹¤ì‹œê°„ ë³´ê¸°:"
echo "   tail -f logs/dart_production_backfill_RESTART.log"
echo ""
echo "8ï¸âƒ£  pykrx ë¡œê·¸ ì‹¤ì‹œê°„ ë³´ê¸°:"
echo "   tail -f logs/pykrx_production_backfill_RESTART.log"
echo ""
echo "9ï¸âƒ£  ì™„ë£Œê¹Œì§€ ë‚¨ì€ ì‹œê°„ ì¶”ì •:"
echo "   tail -20 logs/pykrx_production_backfill_RESTART.log | grep 'Remaining'"
echo ""
echo "ğŸ”Ÿ  ë°±í•„ ì¢…ë£Œ (ê¸´ê¸‰ì‹œ):"
echo "   ./scripts/kill_dart_backfill.sh"
echo "   pkill -f 'backfill_fundamentals_pykrx'"
echo ""
echo "================================================================================"
